<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Dokumentasi API modern dan antarmuka pengujian yang interaktif." />
  <meta name="keywords" content="API, Dokumentasi API, REST API, Falcon API, FlowFalcon, Alat Pengembang" />
  <meta name="author" content="FlowFalcon" />
  <link rel="icon" href="/src/icon.png" type="image/png" />
  <title id="page">Falcon API</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .child-links { display: none; padding-left: 1rem; }
    .child-links a { display: block; padding: 4px 0; font-size: 0.9rem; }
    .side-nav-link.active + .child-links { display: block; }
    .side-nav-link.toggle::after {
      content: '\25BC';
      float: right;
      margin-left: 10px;
      transition: transform 0.3s ease;
    }
    .side-nav-link.collapsed::after {
      transform: rotate(-90deg);
    }
  </style>
</head>
<body>
  <aside class="side-nav">
    <nav class="side-nav-links" id="sideNavLinks">
      <a href="#home" class="side-nav-link">Beranda</a>
    </nav>
  </aside>
  <main id="mainContent">
    <section id="home"><h2>Beranda</h2></section>
    <section id="apis" class="api-section" aria-labelledby="apiSectionTitle">
      <h2 id="apiSectionTitle">API yang Tersedia</h2>
      <div class="tab-content" id="apiContent"></div>
    </section>
  </main>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      fetch('/src/settings.json')
        .then(res => res.json())
        .then(settings => {
          const nav = document.getElementById('sideNavLinks');
          const content = document.getElementById('apiContent');settings.categories.forEach((cat, idx) => {
        const catId = `cat-${idx}`;
        const catLink = document.createElement('a');
        catLink.href = `#${catId}`;
        catLink.className = 'side-nav-link toggle collapsed';
        catLink.innerHTML = `<i class="${cat.icon}"></i> ${cat.name}`;
        nav.appendChild(catLink);

        const childLinks = document.createElement('div');
        childLinks.className = 'child-links';

        cat.items?.forEach((item, i) => {
          const itemId = `${catId}-item-${i}`;
          const link = document.createElement('a');
          link.href = `#${itemId}`;
          link.textContent = item.name;
          link.addEventListener('click', e => {
            e.preventDefault();
            document.getElementById(itemId)?.scrollIntoView({ behavior: 'smooth' });
          });
          childLinks.appendChild(link);
        });

        nav.appendChild(childLinks);

        catLink.addEventListener('click', e => {
          e.preventDefault();
          document.getElementById(catId)?.scrollIntoView({ behavior: 'smooth' });
          document.querySelectorAll('.child-links').forEach(el => el.style.display = 'none');
          document.querySelectorAll('.side-nav-link.toggle').forEach(link => link.classList.add('collapsed'));
          catLink.classList.remove('collapsed');
          childLinks.style.display = 'block';
        });

        const section = document.createElement('div');
        section.className = 'card my-3';
        section.id = catId;
        section.innerHTML = `<div class="card-header"><h5><i class="${cat.icon}"></i> ${cat.name}</h5></div><div class="card-body"></div>`;

        cat.items?.forEach((item, i) => {
          const itemId = `${catId}-item-${i}`;
          const itemDiv = document.createElement('div');
          itemDiv.id = itemId;
          itemDiv.className = 'mb-3';
          itemDiv.innerHTML = `<strong>${item.name}</strong><span class="badge bg-${item.status === 'ready' ? 'success' : 'danger'} ms-2">${item.status}</span><br/><small>${item.desc || ''}</small><br/><code>${item.path}</code>`;
          section.querySelector('.card-body').appendChild(itemDiv);
        });

        content.appendChild(section);
      });
    });
});

  </script>
</body>
</html>
