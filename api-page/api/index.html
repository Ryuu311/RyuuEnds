<!DOCTYPE html><html lang="id">
<head>  
    <meta charset="UTF-8" />  
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />  
    <meta name="description" content="Dokumentasi API modern dan antarmuka pengujian yang interaktif.">  
    <meta name="keywords" content="API, Dokumentasi API, REST API, Falcon API, FlowFalcon, Alat Pengembang">  
    <meta name="author" content="FlowFalcon">  
    <link rel="icon" href="/src/icon.png" type="image/png">  
    <title id="page">Falcon API</title>  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"/>  
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>  
    <link rel="stylesheet" href="/styles.css">  
    <style>  
        .hero-section { padding-top: 40px !important; padding-bottom: 20px !important; min-height: auto !important; }  
        .hero-visual { margin-bottom: -40px !important; }  
        .api-section { padding-top: 10px !important; }
        .children-links {
          display: flex;
          flex-direction: column;
          margin-left: 1rem;
          margin-top: 5px;
        }
        .children-links .child-link {
          font-size: 0.85rem;
          color: #999;
          padding: 4px 0;
        }
        .category-toggle {
          display: flex;
          justify-content: space-between;
          align-items: center;
          cursor: pointer;
        }
    </style>  
</head>
<body>  
    <!-- HTML body as provided, unchanged -->
    <div id="loadingScreen" role="status" aria-live="polite">
        <div class="spinner-wrapper">
            <svg class="spinner-logo" width="80" height="80" viewBox="0 0 100 100" aria-hidden="true">
                <circle class="spinner-path" cx="50" cy="50" r="40" fill="none" stroke-width="8" />
                <circle class="spinner-animation" cx="50" cy="50" r="40" fill="none" stroke-width="8" />
            </svg>
            <p>Memuat<span class="loading-dots">...</span></p>
        </div>
    </div>
    <aside class="side-nav" id="sideNavigation" aria-label="Navigasi Utama">  
      <div class="side-nav-logo">  
          <img src="/src/icon.png" alt="Logo API" style="width: 40px; height: 40px; border-radius: 8px;">  
          <span id="sideNavName">API</span>  
          <div id="versionHeader" class="badge-pill"></div>  
      </div>  
      <nav class="side-nav-links" id="sideNavLinks" aria-label="Tautan navigasi">
        <!-- Kategori akan dimuat melalui JS -->
      </nav>  
      <button class="nav-collapse-btn" aria-label="Alihkan navigasi" aria-controls="sideNavigation">  
          <i class="fas fa-angle-left"></i>  
      </button>  
    </aside><div class="main-wrapper">
  <!-- Main content here -->
</div>

<script src="/script.js"></script>
<script>
(function () {
    const nav = document.getElementById('sideNavLinks');
    const content = document.getElementById('apiContent');
    if (!nav || !content) return;

    function scrollToId(id) {
        const target = document.getElementById(id);
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    }

    fetch('/src/settings.json')
        .then(res => res.json())
        .then(settings => {
            nav.innerHTML = '';

            const home = document.createElement('a');
            home.href = '#home';
            home.className = 'side-nav-link active';
            home.innerHTML = '<i class="fas fa-home"></i><span>Beranda</span>';
            home.addEventListener('click', () => scrollToId('home'));
            nav.appendChild(home);

            settings.categories.forEach(cat => {
                const categoryId = cat.name.toLowerCase().replace(/\s+/g, '-');

                const categoryLink = document.createElement('div');
                categoryLink.className = 'side-nav-link collapsible';
                categoryLink.style.cursor = 'pointer';
                categoryLink.innerHTML = `<i class="${cat.icon}"></i><span>${cat.name}</span>`;
                categoryLink.addEventListener('click', () => {
                    scrollToId(categoryId);
                    document.querySelectorAll('.children-links').forEach(el => el.remove());
                    if (cat.items && cat.items.length > 0) {
                        const childrenContainer = document.createElement('div');
                        childrenContainer.className = 'children-links';
                        cat.items.forEach((item, index) => {
                            const itemId = `${categoryId}-item-${index}`;
                            const childLink = document.createElement('a');
                            childLink.className = 'side-nav-link child-link';
                            childLink.style.paddingLeft = '30px';
                            childLink.textContent = item.name;
                            childLink.href = `#${itemId}`;
                            childLink.addEventListener('click', (e) => {
                                e.stopPropagation();
                                scrollToId(itemId);
                            });
                            childrenContainer.appendChild(childLink);
                        });
                        categoryLink.insertAdjacentElement('afterend', childrenContainer);
                    }
                });
                nav.appendChild(categoryLink);

                const section = document.createElement('div');
                section.className = 'card my-3';
                section.id = categoryId;
                section.innerHTML = `
                    <div class="card-header"><h5><i class="${cat.icon}"></i> ${cat.name}</h5></div>
                    <div class="card-body"></div>
                `;

                (cat.items || []).forEach((item, index) => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'mb-3';
                    itemDiv.id = `${categoryId}-item-${index}`;
                    itemDiv.innerHTML = `
                        <strong>${item.name}</strong>
                        <span class="badge bg-${item.status === 'ready' ? 'success' : 'danger'} ms-2">${item.status}</span><br/>
                        <small>${item.desc || ''}</small><br/>
                        <code>${item.path}</code>
                    `;
                    section.querySelector('.card-body').appendChild(itemDiv);
                });

                content.appendChild(section);
            });

            document.getElementById('sideNavName').textContent = settings.name;
            document.getElementById('page').textContent = settings.name;
            document.getElementById('name').textContent = settings.name;
            document.getElementById('version').textContent = settings.version;
            document.getElementById('versionHeader').textContent = settings.header?.status || '';
            document.getElementById('dynamicImage').src = settings.bannerImage || '/src/banner.jpg';
        })
        .catch(console.error);
})();
</script>

</body>
</html>
